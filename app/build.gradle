apply plugin: 'com.android.application'
apply plugin: 'kotlin-android'
apply plugin: 'kotlin-android-extensions'
apply plugin: 'kotlin-kapt'

def versionMajor = 1
def versionMinor = 0
def versionPatch = 0
def versionBuild = 0

android {

  compileSdkVersion rootProject.compileSdkVersion
  buildToolsVersion rootProject.buildToolsVersion

  defaultConfig {
    applicationId "com.ng.tvshowsdb"
    minSdkVersion rootProject.minSdkVersion
    targetSdkVersion rootProject.targetSdkVersion
    versionCode versionMajor * 10000 + versionMinor * 1000 + versionPatch * 100 + versionBuild
    versionName "${versionMajor}.${versionMinor}.${versionPatch}"

    testInstrumentationRunner "com.ng.tvshowsdb.common.CustomAndroidJUnitTestRunner"
  }
  buildTypes {
    release {
      minifyEnabled false
      proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'
    }
  }
}

dependencies {
  def appDependencies = rootProject.ext.appDependencies
  def appTestDependencies = rootProject.ext.appTestDependencies

  implementation project(":presentation")
  implementation project(":data")
  implementation project(":domain")

  implementation appDependencies.kotlin
  implementation appDependencies.appcompatV7
  implementation appDependencies.supportDesign
  implementation appDependencies.recyclerView
  implementation appDependencies.cardView
  implementation appDependencies.supportConstraint
  implementation appDependencies.glide
  kapt appDependencies.glideCompiler
  implementation appDependencies.dagger
  implementation appDependencies.rxAndroid
  implementation appDependencies.dagger
  kapt appDependencies.daggerCompiler
  implementation appDependencies.daggerAndroid
  implementation appDependencies.daggerAndroidSupport
  kapt appDependencies.daggerAndroidCompiler

  testImplementation appTestDependencies.junit
  androidTestImplementation appTestDependencies.junit
  androidTestImplementation appTestDependencies.kotlinJUnit
  androidTestImplementation appTestDependencies.androidRunner
  androidTestImplementation appTestDependencies.androidRules
  androidTestImplementation appTestDependencies.mockitoAndroid
  androidTestImplementation appTestDependencies.mockitoKotlin
  androidTestImplementation(appTestDependencies.espressoCore, {
    exclude group: 'com.android.support', module: 'support-annotations'
  })
  androidTestImplementation(appTestDependencies.espressoContrib, {
    exclude group: 'com.android.support', module: 'appcompat'
    exclude group: 'com.android.support', module: 'support-v4'
    exclude group: 'com.android.support', module: 'support-annotations'
    exclude module: 'recyclerview-v7'
  })
  androidTestImplementation appTestDependencies.espressoIntents
  kaptAndroidTest appTestDependencies.daggerCompiler
  kaptAndroidTest appTestDependencies.daggerAndroidCompiler
}
